<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"> <title>Self-updating portfolio on README &#8211; Mayra Azevedo</title> <meta name="description" content="Technology has a primordial role in civic innovation, as it is helping to diagnose problems from society to the government and bringing solutions, besides improving decision-making. Among the applications, we can think of examples that include controlling waste in the city or encouraging the population to be more politically active."> <meta name="keywords" content="python, pandana, maps, walkability"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="https://avatars0.githubusercontent.com/u/23341788?s=460&v=4"> <meta name="twitter:title" content="Self-updating portfolio on README"> <meta name="twitter:description" content="Technology has a primordial role in civic innovation, as it is helping to diagnose problems from society to the government and bringing solutions, besides improving decision-making. Among the applications, we can think of examples that include controlling waste in the city or encouraging the population to be more politically active."> <meta name="twitter:site" content="@mayradazevedo"> <meta name="twitter:creator" content="@mayradazevedo"> <!-- Open Graph --> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="Self-updating portfolio on README"> <meta property="og:description" content="Technology has a primordial role in civic innovation, as it is helping to diagnose problems from society to the government and bringing solutions, besides improving decision-making. Among the applications, we can think of examples that include controlling waste in the city or encouraging the population to be more politically active."> <meta property="og:url" content="http://127.0.0.1:4000/fear-the-walkingdistance/"> <meta property="og:site_name" content="Mayra Azevedo"> <meta property="og:image" content="http://127.0.0.1:4000/images/https://avatars0.githubusercontent.com/u/23341788?s=460&v=4"> <link rel="canonical" href="http://127.0.0.1:4000/fear-the-walkingdistance/"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Feed --> <link type="application/atom+xml" rel="alternate" href="http://127.0.0.1:4000/feed.xml" title="Mayra Azevedo" /> <!-- Favicons --> <link rel="shortcut icon" type="image/png" href="http://127.0.0.1:4000/favicon.png" /> <link rel="shortcut icon" href="http://127.0.0.1:4000/favicon.ico" /> <!-- CSS --> <link rel="stylesheet" type="text/css" href="http://127.0.0.1:4000/assets/css/main.css"> <!-- Left Block Image for Posts --> <style type="text/css"> #posts.inner-post-page .block-post {background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(http://127.0.0.1:4000/images/w1.jpeg) no-repeat;background-size: cover;} </style> <!-- Left Block Images for Home and Pages --> <style type="text/css"> #posts .block-left {background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(http://127.0.0.1:4000/images/w1.jpeg) no-repeat;background-size: cover, cover;} .block-left {background: linear-gradient(rgba(44,45,51,0.9), rgba(44,45,51,0.9)), url(http://127.0.0.1:4000/images/natown.jpg) no-repeat;background-size: cover;} </style> <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML'></script> <link rel="stylesheet" href="https://cdn.pydata.org/bokeh/release/bokeh-1.0.4.min.css" type="text/css" /> <link rel="stylesheet" href="https://cdn.pydata.org/bokeh/release/bokeh-widgets-1.0.4.min.css" type="text/css" /> <script type="text/javascript" src="https://cdn.pydata.org/bokeh/release/bokeh-1.0.4.min.js"></script> <script type="text/javascript" src="https://cdn.pydata.org/bokeh/release/bokeh-widgets-1.0.4.min.js"></script> <script type="text/javascript"> Bokeh.set_log_level("info"); </script> <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"> <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous"> <style> a {color: black;} a:hover { color: #8f6bff; } </style> </head> <body id="posts" class="inner-post-page"> <header class="navbar navbar-expand navbar-dark flex-column flex-row-reverse bd-navbar"> <div class="d-flex flex-row-reverse bd-highlight pull-right"> <div class="p-2 bd-highlight"> <a title="projects" href="../projects.html" > Projects </a> </div> <div class="p-2 bd-highlight"> <a href="../posts.html" title="posts">Posts</a> </div> <div class="p-2 bd-highlight"> <a href="http://127.0.0.1:4000" title="home" style="font-family: 'Raleway','Helvetica Neue',Helvetica,Arial,sans-serif; font-weight: 500">Home</a></div> </div> </header> <div style="height: 90%; overflow: auto;"> <div class="block-post"> <div class="content"> <div class="post-title-section"> <div class="section-line">Posts <em>/</em></div> <h1 class="section-title">Self-updating portfolio on README </h1> <ul class="tags"> <li><a href="http://127.0.0.1:4000/tags#python">python</a></li> <li><a href="http://127.0.0.1:4000/tags#pandana">pandana</a></li> <li><a href="http://127.0.0.1:4000/tags#maps">maps</a></li> <li><a href="http://127.0.0.1:4000/tags#walkability">walkability</a></li> </ul> <div class="section-line reverse"> <em>/</em></div> </div> </div> </div> <div class="post"> <div class="inner-post post-content"> <div class="date-highlight">05/12/2020</div> <p>Technology has a primordial role in civic innovation, as it is helping to diagnose problems from society to the government and bringing solutions, besides improving decision-making. Among the applications, we can think of examples that include controlling waste in the city or encouraging the population to be more politically active.</p> <p>Urban mobility is one of the various aspects to which authorities must pay attention. Since transportation can be a substantial source of stress, planning has a direct impact on life quality. When thinking of sustainability, this discussion becomes even more complex. It claims more bike lanes and, more importantly, the opportunity for pedestrians to resolve their business in the city by walking.</p> <p>With that in mind, in this post, we try to measure the walkability in Natal, Brazil, using data science, open data, and maps. There are similar posts that were the source of great inspiration, including one from <a href="https://medium.com/pizzadedados/utilizando-dados-abertos-e-ci%C3%AAncia-de-dados-na-mobilidade-urbana-371a4c591639">Maceió</a>, another Brazilian city, <a href="https://medium.com/@matthewtenneyto/measuring-walking-times-across-toronto-to-nearest-ttc-stop-using-the-pedestrian-network-and-python-4263e0392a9b">Toronto</a>, and <a href="https://towardsdatascience.com/measuring-pedestrian-accessibility-97900f9e4d56">New York</a>.</p> <p>All the code for the steps below is available in the <a href="https://github.com/nymarya/fear-the-walking-distance">repository</a>.</p> <h2 id="data-first">Data first</h2> <p>The plan is to measure walking distance within a district and compare different neighborhoods. Before getting into that, we should go deeper and get information about the people there. That’s a quick task since IBGE provides data about the income and the number of inhabitants through the <a href="sidra.ibge.gov.br">SIDRA API</a>, so the <code class="language-plaintext highlighter-rouge">requests</code> library will do all the work here. The per capita income and the number of inhabitants are described, respectively, by the variables 842 and 841 from table number 3170.</p> <p>Now, the interesting bit. How to measure pedestrian accessibility within a district? Searching for an arbitrary approach, we got to this: picking a point right in the middle of the area and calculating the distance from it to the nearest point of interest. That means finding the center, name centroid, of a polygon. Luckily, the GeoJSON that describes the city has the geometry for the region of interest, consisting of a Polygon object, which has the centroid as an attribute.</p> <p>The next step is to calculate the distances per se. We create a network with Pandana, which retrieves the data from <a href="https://wiki.openstreetmap.org/wiki/API">OpenStreetMap</a> in a very efficient way.</p> <p>The library also provides a function to query the points of interest in the network. In this study, the search is for amenities that cover basic needs: food, education, money, health, and safety. In OSM API terms, the tags are ‘hospital’, ‘restaurant’, ‘bank’,’school’, ‘police’, and ‘pharmacy’.</p> <p>Following the workflow suggested in their <a href="https://github.com/UDST/pandana/blob/dev/examples/Pandana-demo.ipynb">demo</a>, we call <code class="language-plaintext highlighter-rouge">set_pois</code> to add the points to the network. That is done separately for each category. Here, we already specify that we only want to know the amenities within 10km. The next step will use this information.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
</code></pre></div></div> <p>Then, the calculation is done by calling <code class="language-plaintext highlighter-rouge">nearest_pois</code> and passing the max distance and the number of items that the function must return.</p> <h3 id="its-visualization-time">It’s visualization time!</h3> <div> <center> <img src="https://media.giphy.com/media/rOTGSPxvJJY7m/giphy.gif" /> </center> </div> <p>The dataset is ready, so it’s time to use <a href="https://github.com/python-visualization/folium">Folium</a>, a library responsible for unifying data manipulation with Python, and maps visualizations with JavaScript’s <a href="https://github.com/Leaflet/Leaflet">Leaflet</a>. That is all a programmer needs to show their data when already having geographical data in their hands.</p> <div> <center> <iframe src="http://127.0.0.1:4000/assets/htmls/fear_the_walking_distance/population.html" height="400" width="400"></iframe> <iframe src="http://127.0.0.1:4000/assets/htmls/fear_the_walking_distance/income.html" height="400" width="400"></iframe> <figcaption>Left: the darker the color, the greater the population. Right: The darker the color, the bigger the mean income</figcaption> </center> </div> <p>The maps show that whereas the population is more concentrated in the north, followed by the west zone, the income has an inverse tendency. The mean income increases as we go in the south direction and even more when looking east, where the districts with higher incomes are.</p> <div> <center> <iframe src="http://127.0.0.1:4000/assets/htmls/fear_the_walking_distance/school.html" height="350" width="400"></iframe> <iframe src="http://127.0.0.1:4000/assets/htmls/fear_the_walking_distance/restaurant.html" height="350" width="400"></iframe> <iframe src="http://127.0.0.1:4000/assets/htmls/fear_the_walking_distance/pharmacy.html" height="350" width="400"></iframe> </center> </div> <p>There’s a pattern when seeing the distance that someone in the middle of a neighborhood would have to walk to the nearest school, pharmacy, or restaurant. Districts with less accessibility, meaning colored in light or dark purple, are in the north and west areas, highlighting the Nossa Senhora da Apresentação district, colored with the darker purple in all three maps. Lagoa Azul, the neighboring region, shows similar <em>performance</em>, having the darker color in two out of three maps.</p> <center> <iframe src="http://127.0.0.1:4000/assets/htmls/fear_the_walking_distance/hospital.html" height="350" width="400"></iframe> <iframe src="http://127.0.0.1:4000/assets/htmls/fear_the_walking_distance/police.html" height="350" width="400"></iframe> </center> <p>Regarding hospitals and police stations, there’s a significant difference between the two sides of the river. In both maps, purple-colored districts are exclusively in the north, meaning that the inhabitants usually would have to walk at least 6km to get to the nearest hospital or police stations. There are some blue-painted districts in the west and the south, where the distance is between 2km and 6km and can be problematic if we imagine having to walk this much to get to a hospital.</p> <div> <center> <iframe src="http://127.0.0.1:4000/assets/htmls/fear_the_walking_distance/bank.html" height="380" width="400"></iframe> </center> </div> <p>The analysis of distances to banks is a little different from the previous ones. Here, the western districts have darker colors, indicating greater distances, than the northern districts.</p> <p>Note that in all maps, the districts in the east have a light blue coloring, usually on a smaller scale than in the south, although the second region has a similar performance. This pattern matches the income, higher in the south and ever more distinguished in some eastern neighborhoods.</p> <h3 id="final-thoughts">Final thoughts</h3> <p>Open data is an essential tool to empower citizens through information, providing ways to make decisions and ask authorities. In the OpenStreet Map case, its only fault is regarding reliability. That’s why it’s so important to celebrate institutes such as IBGE, which not only are responsible for collecting information but also facilitate access to high-quality data.</p> <p>Even though it’s not possible to draw hard conclusions because there’s a chance that the data from districts like Nossa Senhora da Apresentação, Lagoa Azul, and Guarapés are missing, the available information tells us that there’s a lack of accessibility in these areas. This affirmation corroborates with the claims of the habitants in social media and local news. The fact that most of these neighborhoods are also populous implies that many people may suffer from the scarcity of investment.</p> <p>Finally, future works include exploring more of Pandana. Also, there’s interest in testing another approach to compare the distances. The alternative would be calculating the distances from each node from the neighborhood to the nearest amenity and then calculate the mean.</p> <h2 id="links">Links</h2> <p><a href="https://medium.com/@mayradazevedo/ate-onde-e-posivel-chegar-a-pe-em-natal-4e50d1e46685">Previous version of this study (PT-BR_)</a></p> <br> <a href="https://twitter.com/intent/tweet?text=via @nymaryah: http://127.0.0.1:4000/fear-the-walkingdistance/" class="btn btn_twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a> <a href="https://www.facebook.com/sharer/sharer.php?u=http://127.0.0.1:4000/fear-the-walkingdistance/" class="btn btn_facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a> <br> <script async src="https://telegram.org/js/telegram-widget.js?11" data-telegram-share-url="http://127.0.0.1:4000/fear-the-walkingdistance/" data-comment="Via nymaryah: " data-size="large" class="btn"></script> <nav class="pagination"> <a href="http://127.0.0.1:4000/predizendo-notas-do-enem/" class="pagination_pager" title="Predizendo notas do ENEM ">previous</a> <a href="#" class="pagination_pager disabled">next</a> </nav> </div> </div> </div> <!-- JS --> <script src="http://127.0.0.1:4000/assets/js/main.min.js"></script> <script type="text/javascript"> /* Set the width of the sidebar to 250px (show it) */ function openNav() { $('div.block-left').show(); $('.block-right').css('width', '60%'); $('#menu-right').hide(); } /* Set the width of the sidebar to 0 (hide it) */ function closeNav() { $('div.block-left').hide(); $('.block-right').css('width', '100%'); $('#menu-right').show(); } </script> </body> </html>
